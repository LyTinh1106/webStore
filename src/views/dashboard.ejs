<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- style -->
    <link rel="stylesheet" href="css/dashboardStyle.css">
    <!-- Flatpickr CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">

</head>

<body>
    <!-- Sidebar -->
    <div class="sidebar">
        <div class="logo">Tech Admin</div>
        <ul>
            <li><a href="#dashboard"><i class="fas fa-tachometer-alt me-2"></i> Dashboard</a></li>
            <li><a href="#orders"><i class="fas fa-shopping-cart me-2"></i> Đơn hàng</a></li>
            <li><a href="#products"><i class="fas fa-mobile-alt me-2"></i> Sản phẩm</a></li>
            <li><a href="#categories"><i class="fas fa-list me-2"></i> Loại sản phẩm</a></li>
            <li><a href="#accounts"><i class="fas fa-users me-2"></i> Nhãn hàng</a></li>
            <li><a href="#accounts"><i class="fas fa-users me-2"></i> Giao hàng</a></li>
            <li><a href="#accounts"><i class="fas fa-users me-2"></i> Nhà cung cấp</a></li>
            <li><a href="#accounts"><i class="fas fa-users me-2"></i> Voucher</a></li>
            <li><a href="#accounts"><i class="fas fa-users me-2"></i> Tài khoản</a></li>
            <li><a href="/logout"><i class="fas fa-sign-out-alt me-2"></i> Đăng xuất</a></li>
        </ul>
    </div>

    <!-- Main Content -->
    <div class="main-content">
        <!-- Header with User Info -->
        <div class="header-container">
            <h2>Dashboard</h2>
            <div class="user-info">
                <div class="user-avatar">A</div>
                <div class="user-details">
                    <span class="user-name">Admin</span>
                    <span class="user-role">Quản trị viên</span>
                </div>
                <div class="dropdown ms-2">
                    <button class="btn btn-sm dropdown-toggle" type="button" id="userDropdown" data-bs-toggle="dropdown"
                        aria-expanded="false">
                        <i class="fas fa-angle-down"></i>
                    </button>
                    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userDropdown">
                        <li><a class="dropdown-item" href="#"><i class="fas fa-user me-2"></i> Hồ sơ</a></li>
                        <li><a class="dropdown-item" href="#"><i class="fas fa-cog me-2"></i> Cài đặt</a></li>
                        <li>
                            <hr class="dropdown-divider">
                        </li>
                        <li><a class="dropdown-item" href="/logout"><i class="fas fa-sign-out-alt me-2"></i> Đăng
                                xuất</a></li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Stats Panels -->
        <div class="row" id="dashboard">
            <div class="col-md-3">
                <div class="dashboard-card revenue">
                    <div><i class="fas fa-dollar-sign"></i> Tổng doanh thu</div>
                    <div class="value">1,250,000,000 VNĐ</div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="dashboard-card orders">
                    <div><i class="fas fa-shopping-cart"></i> Đơn đặt hàng</div>
                    <div class="value">256</div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="dashboard-card customers">
                    <div><i class="fas fa-users"></i> Khách hàng</div>
                    <div class="value">125</div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="dashboard-card products">
                    <div><i class="fas fa-mobile-alt"></i> Sản phẩm hiện có</div>
                    <div class="value">82</div>
                </div>
            </div>
        </div>

        <!-- Orders Section -->
        <div class="content-section" id="orders">
            <h3 class="section-title">Quản lý đơn hàng</h3>
            <div class="table-responsive">
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th>Mã ĐH</th>
                            <th>Khách hàng</th>
                            <th>Ngày đặt</th>
                            <th>Phương thức thanh toán</th>
                            <th>Tổng tiền</th>
                            <th>Trạng thái</th>
                            <th>Thao tác</th>
                        </tr>
                    </thead>
                    <tbody>
                        <% if (orders.length> 0) { %>
                            <% orders.forEach(order=> { %>
                                <tr>
                                    <td>#<%= order.id %>
                                    </td>
                                    <td>
                                        <%= order.email || 'Không rõ' %>
                                    </td>
                                    <td>
                                        <%= new Date(order.created_at).toLocaleDateString('vi-VN') %>
                                    </td>
                                    <td>
                                        <%= order.payment_method %>
                                    </td>
                                    <td>
                                        <%= order.total_payment %> VNĐ
                                    </td>
                                    <td>
                                        <% if (order.order_status==='Đã giao' ) { %>
                                            <span class="badge bg-success">
                                                <%= order.order_status %>
                                            </span>
                                            <% } else if (order.order_status==='Đang chờ' ) { %>
                                                <span class="badge bg-warning">
                                                    <%= order.order_status %>
                                                </span>
                                                <% } else if (order.order_status==='Đã hủy' ) { %>
                                                    <span class="badge bg-danger">
                                                        <%= order.order_status %>
                                                    </span>
                                                    <% } else { %>
                                                        <span class="badge bg-secondary">
                                                            <%= order.order_status %>
                                                        </span>
                                                        <% } %>
                                    </td>
                                    <td>
                                        <a href="/orders/<%= order.id %>" class="btn btn-sm btn-primary"><i
                                                class="fas fa-eye"></i></a>
                                        <a href="/orders/<%= order.id %>/edit" class="btn btn-sm btn-info"><i
                                                class="fas fa-edit"></i></a>
                                        <form action="/orders/<%= order.id %>/delete" method="POST" class="d-inline">
                                            <button type="submit" class="btn btn-sm btn-danger"
                                                onclick="return confirm('Bạn có chắc muốn xóa đơn hàng này?')"><i
                                                    class="fas fa-trash"></i></button>
                                        </form>
                                    </td>
                                </tr>
                                <% }) %>
                                    <% } else { %>
                                        <tr>
                                            <td colspan="7" class="text-center">Không có đơn hàng nào.</td>
                                        </tr>
                                        <% } %>
                    </tbody>

                </table>
            </div>
            <!-- <nav aria-label="Page navigation">
                <ul class="pagination justify-content-end">
                    <li class="page-item disabled"><a class="page-link" href="#">Trước</a></li>
                    <li class="page-item active"><a class="page-link" href="#">1</a></li>
                    <li class="page-item"><a class="page-link" href="#">2</a></li>
                    <li class="page-item"><a class="page-link" href="#">3</a></li>
                    <li class="page-item"><a class="page-link" href="#">Sau</a></li>
                </ul>
            </nav> -->
        </div>

        <!-- Products Section -->
        <div class="content-section" id="products">
            <h3 class="section-title">Quản lý sản phẩm</h3>
            <div class="mb-3">
                <!-- Nút mở popup -->
                <a href="#" class="btn btn-success" data-bs-toggle="modal" data-bs-target="#addProductModal">
                    <i class="fas fa-plus"></i> Thêm sản phẩm mới
                </a>

                <!-- Modal Thêm Sản Phẩm -->
                <div class="modal fade" id="addProductModal" tabindex="-1" aria-labelledby="addProductModalLabel"
                    aria-hidden="true">
                    <div class="modal-dialog modal-xl modal-dialog-scrollable">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title">Thêm Sản Phẩm Mới</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal"
                                    aria-label="Đóng"></button>
                            </div>
                            <div class="modal-body">
                                <form id="addProductForm" enctype="multipart/form-data">
                                    <div class="row g-3">
                                        <div class="col-md-6">
                                            <label for="productCode" class="form-label">Mã sản phẩm</label>
                                            <input type="text" class="form-control" id="productCode" name="productCode"
                                                required>
                                        </div>
                                        <div class="col-md-6">
                                            <label for="productName" class="form-label">Tên sản phẩm</label>
                                            <input type="text" class="form-control" id="productName" name="productName"
                                                required>
                                        </div>
                                        <div class="col-12">
                                            <label for="description" class="form-label">Mô tả</label>
                                            <textarea class="form-control" id="description" name="description"
                                                rows="3"></textarea>
                                        </div>
                                        <div class="col-md-6">
                                            <label for="importPrice" class="form-label">Giá nhập</label>
                                            <input type="number" class="form-control" id="importPrice"
                                                name="importPrice" required>
                                        </div>
                                        <div class="col-md-6">
                                            <label for="salePrice" class="form-label">Giá bán</label>
                                            <input type="number" class="form-control" id="salePrice" name="salePrice"
                                                required>
                                        </div>
                                        <div class="col-md-6">
                                            <label for="category" class="form-label">Loại sản phẩm</label>
                                            <select class="form-select" id="category" name="category">
                                                <option value="">-- Chọn loại --</option>
                                                <option value="Điện thoại">Điện thoại</option>
                                                <option value="Laptop">Laptop</option>
                                                <option value="Phụ kiện">Phụ kiện</option>
                                            </select>
                                        </div>
                                        <div class="col-md-6">
                                            <label for="brand" class="form-label">Hãng</label>
                                            <select class="form-select" id="brand" name="brand">
                                                <option value="">-- Chọn hãng --</option>
                                                <option value="Apple">Apple</option>
                                                <option value="Samsung">Samsung</option>
                                                <option value="Dell">Dell</option>
                                            </select>
                                        </div>
                                        <div class="col-md-6">
                                            <label for="origin" class="form-label">Xuất xứ</label>
                                            <input type="text" class="form-control" id="origin" name="origin">
                                        </div>
                                        <div class="col-md-6">
                                            <label for="warranty" class="form-label">Bảo hành (tháng)</label>
                                            <input type="number" class="form-control" id="warranty" name="warranty">
                                        </div>

                                        <!-- Hình ảnh -->
                                        <div class="col-md-6">
                                            <label for="mainImage" class="form-label">Hình chính</label>
                                            <input class="form-control" type="file" id="mainImage" name="mainImage"
                                                accept="image/*">
                                            <div id="mainImagePreview" class="mt-2 position-relative"
                                                style="max-width: 150px;"></div>
                                        </div>
                                        <div class="col-md-6">
                                            <label for="extraImages" class="form-label">Hình phụ</label>
                                            <input class="form-control" type="file" id="extraImages"
                                                name="extraImages[]" multiple accept="image/*">
                                            <div id="previewArea" class="mt-2 d-flex flex-wrap gap-2"></div>
                                        </div>

                                        <!-- Thông số kỹ thuật -->
                                        <div class="col-md-12">
                                            <label for="specFile" class="form-label">Thông số kỹ thuật (File)</label>
                                            <input class="form-control" type="file" id="specFile" name="specFile"
                                                accept=".pdf,.doc,.docx,.xls,.xlsx,.txt">
                                            <small class="text-muted">Hỗ trợ các định dạng: PDF, Word, Excel,
                                                TXT</small>
                                        </div>
                                    </div>
                                </form>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Hủy</button>
                                <button type="submit" form="addProductForm" class="btn btn-primary">Thêm sản
                                    phẩm</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- JavaScript xử lý ảnh -->
                <script>
                    const mainImageInput = document.getElementById("mainImage");
                    const mainImagePreview = document.getElementById("mainImagePreview");

                    const extraImagesInput = document.getElementById("extraImages");
                    const previewArea = document.getElementById("previewArea");

                    let mainImageFile = null;
                    let extraImagesFiles = [];

                    // Hiển thị và xóa hình chính
                    mainImageInput.addEventListener("change", () => {
                        const file = mainImageInput.files[0];
                        if (!file) return;

                        // Kiểm tra trùng với hình phụ
                        if (extraImagesFiles.some(f => f.name === file.name)) {
                            alert("Hình này đã được chọn ở hình phụ. Vui lòng chọn hình khác.");
                            mainImageInput.value = "";
                            return;
                        }

                        mainImageFile = file;
                        renderMainImagePreview();
                    });

                    function renderMainImagePreview() {
                        if (!mainImageFile) {
                            mainImagePreview.innerHTML = "";
                            return;
                        }

                        const reader = new FileReader();
                        reader.onload = function (e) {
                            mainImagePreview.innerHTML = `
        <img src="${e.target.result}" class="img-thumbnail" style="width: 100%;">
        <button class="btn btn-sm btn-danger position-absolute" style="top:0; right:0;" onclick="removeMainImage()">×</button>
      `;
                        };
                        reader.readAsDataURL(mainImageFile);
                    }

                    function removeMainImage() {
                        mainImageFile = null;
                        mainImageInput.value = "";
                        mainImagePreview.innerHTML = "";
                    }

                    // Xử lý hình phụ
                    extraImagesInput.addEventListener("change", (event) => {
                        const files = Array.from(event.target.files);
                        let added = false;

                        files.forEach(file => {
                            if (file.name === mainImageFile?.name) {
                                alert(`Hình "${file.name}" đã chọn ở hình chính.`);
                                return;
                            }

                            if (extraImagesFiles.some(f => f.name === file.name)) {
                                alert(`Hình "${file.name}" đã được chọn rồi.`);
                                return;
                            }

                            extraImagesFiles.push(file);
                            added = true;
                        });

                        if (added) renderExtraPreviews();
                        extraImagesInput.value = ""; // reset input để có thể chọn lại hình đã bỏ qua
                    });

                    function renderExtraPreviews() {
                        previewArea.innerHTML = "";
                        extraImagesFiles.forEach((file, index) => {
                            const reader = new FileReader();
                            reader.onload = function (e) {
                                const wrapper = document.createElement("div");
                                wrapper.className = "position-relative";

                                const img = document.createElement("img");
                                img.src = e.target.result;
                                img.classList.add("img-thumbnail");
                                img.style.width = "100px";
                                img.style.height = "100px";

                                const removeBtn = document.createElement("button");
                                removeBtn.innerText = "×";
                                removeBtn.className = "btn btn-sm btn-danger position-absolute";
                                removeBtn.style.top = "0";
                                removeBtn.style.right = "0";
                                removeBtn.onclick = () => {
                                    extraImagesFiles.splice(index, 1);
                                    renderExtraPreviews();
                                };

                                wrapper.appendChild(img);
                                wrapper.appendChild(removeBtn);
                                previewArea.appendChild(wrapper);
                            };
                            reader.readAsDataURL(file);
                        });
                    }

                    // Submit form
                    document.getElementById("addProductForm").addEventListener("submit", function (e) {
                        e.preventDefault();
                        const formData = new FormData(this);

                        if (mainImageFile) {
                            formData.set("mainImage", mainImageFile);
                        }

                        extraImagesFiles.forEach(file => {
                            formData.append("extraImages[]", file);
                        });

                        console.log("Đã sẵn sàng gửi form:");
                        console.log("Hình chính:", mainImageFile?.name);
                        console.log("Số hình phụ:", extraImagesFiles.length);

                        // Gửi formData bằng fetch hoặc axios nếu muốn
                    });
                </script>

            </div>
            <div class="table-responsive">
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th>Mã SP</th>
                            <th>Tên sản phẩm</th>
                            <th>Loại</th>
                            <th>Giá nhập</th>
                            <th>Giá bán</th>
                            <th>Xuất xứ</th>
                            <th>Bảo hành</th>
                            <th>Thao tác</th>
                        </tr>
                    </thead>
                    <tbody>
                        <% if (products.length> 0) { %>
                            <% products.forEach((product)=> { %>
                                <tr>
                                    <td>
                                        <%= product.fancy_id %>
                                    </td>
                                    <td>
                                        <%= product.name %>
                                    </td>
                                    <td>
                                        <%= product.category_name|| 'Không rõ' %>
                                    </td>
                                    <td>
                                        <%= Number(product.import_price).toLocaleString('vi-VN') %> VNĐ
                                    </td>
                                    <td>
                                        <%= Number(product.retail_price).toLocaleString('vi-VN') %> VNĐ
                                    </td>
                                    <td>
                                        <%= product.origin %>
                                    </td>
                                    <td>
                                        <%= product.warranty %>
                                    </td>
                                    <td>
                                        <a href="/products/<%= product.id %>" class="btn btn-sm btn-primary"><i
                                                class="fas fa-eye"></i></a>
                                        <a href="/products/<%= product.id %>/edit" class="btn btn-sm btn-info"><i
                                                class="fas fa-edit"></i></a>
                                        <form action="/products/<%= product.id %>/delete" method="POST"
                                            class="d-inline">
                                            <button type="submit" class="btn btn-sm btn-danger"
                                                onclick="return confirm('Bạn có chắc muốn xóa sản phẩm này?')">
                                                <i class="fas fa-trash"></i>
                                            </button>
                                        </form>
                                    </td>
                                </tr>
                                <% }) %>
                                    <% } else { %>
                                        <tr>
                                            <td colspan="8" class="text-center">Không có sản phẩm nào.</td>
                                        </tr>
                                        <% } %>
                    </tbody>


                </table>
            </div>
            <!-- <nav aria-label="Page navigation">
                <ul class="pagination justify-content-end">
                    <li class="page-item disabled"><a class="page-link" href="#">Trước</a></li>
                    <li class="page-item active"><a class="page-link" href="#">1</a></li>
                    <li class="page-item"><a class="page-link" href="#">2</a></li>
                    <li class="page-item"><a class="page-link" href="#">3</a></li>
                    <li class="page-item"><a class="page-link" href="#">Sau</a></li>
                </ul>
            </nav> -->
        </div>

        <!-- Categories Section -->
        <div class="content-section" id="categories">
            <h3 class="section-title">Quản lý loại sản phẩm</h3>
            <div class="mb-3">
                <!-- Nút mở popup -->
                <a href="#" class="btn btn-success" data-bs-toggle="modal" data-bs-target="#addCategoryModal">
                    <i class="fas fa-plus"></i> Thêm danh mục mới
                </a>

                <!-- Modal Form -->
                <div class="modal fade" id="addCategoryModal" tabindex="-1" aria-labelledby="addCategoryModalLabel"
                    aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered">
                        <div class="modal-content">

                            <div class="modal-header">
                                <h5 class="modal-title" id="addCategoryModalLabel">Thêm loại sản phẩm</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal"
                                    aria-label="Đóng"></button>
                            </div>

                            <div class="modal-body">
                                <form id="addCategoryForm">
                                    <div class="mb-3">
                                        <label for="categoryName" class="form-label">Tên loại sản phẩm</label>
                                        <input type="text" class="form-control" id="categoryName" name="cat_Name"
                                            placeholder="Nhập tên loại sản phẩm" required>
                                    </div>
                                </form>
                            </div>

                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Hủy</button>
                                <button type="submit" form="addCategoryForm" class="btn btn-primary">Thêm</button>
                            </div>

                        </div>
                    </div>
                </div>
            </div>

            <div class="table-responsive">
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th>Mã loại</th>
                            <th>Tên loại</th>
                            <th>Thao tác</th>
                        </tr>
                    </thead>
                    <tbody>
                        <% categories.forEach((category, index)=> { %>
                            <tr>
                                <td>
                                    <%= category.id %>
                                </td> <!-- Đã bỏ L001 -->
                                <td>
                                    <%= category.name %>
                                </td>
                                <td>
                                    <a href="/categories/<%= category.id %>/edit" class="btn btn-sm btn-info">
                                        <i class="fas fa-edit"></i>
                                    </a>
                                    <button class="btn btn-sm btn-danger delete-category-btn"
                                        data-id="<%= category.id %>">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </td>
                            </tr>
                            <% }) %>
                    </tbody>


                </table>
            </div>
        </div>

        <!-- Brands Section -->
        <div class="content-section" id="brands">
            <h3 class="section-title">Quản lý nhãn hàng</h3>
            <div class="mb-3">
                <!-- Nút mở popup -->
                <a href="#" class="btn btn-success" data-bs-toggle="modal" data-bs-target="#addBrandModal">
                    <i class="fas fa-plus"></i> Thêm nhãn hàng mới
                </a>
                <!-- Modal Form -->
                <div class="modal fade" id="addBrandModal" tabindex="-1" aria-labelledby="addBrandModalLabel"
                    aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered">
                        <div class="modal-content">

                            <div class="modal-header">
                                <h5 class="modal-title" id="addBrandModalLabel">Thêm nhãn hàng mới</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal"
                                    aria-label="Đóng"></button>
                            </div>

                            <div class="modal-body">
                                <form id="addBrandForm">
                                    <div class="mb-3">
                                        <label for="brandName" class="form-label">Tên nhãn hàng</label>
                                        <input type="text" class="form-control" id="brandName" name="brand_Name"
                                            placeholder="Nhập tên nhãn hàng" required>
                                    </div>
                                </form>
                            </div>

                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Hủy</button>
                                <button type="submit" form="addBrandForm" class="btn btn-primary">Thêm</button>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
            <div class="table-responsive">
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th>Mã nhãn hàng</th>
                            <th>Tên nhãn hàng</th>
                            <th>Thao tác</th>
                        </tr>
                    </thead>
                    <tbody>
                        <% if (brands && brands.length> 0) { %>
                            <% brands.forEach((brand)=> { %>
                                <tr>
                                    <td>
                                        <%= brand.brand_id %>
                                    </td>
                                    <td>
                                        <%= brand.brand_name %>
                                    </td>
                                    <td>
                                        <!-- popup updatebutton -->
                                        <a href="#" class="btn btn-sm btn-info" data-bs-toggle="modal"
                                            data-bs-target="#updateBrandModal">
                                            <i class="fas fa-edit"></i>
                                        </a>
                                        <!-- popup updateform -->
                                        <div class="modal fade" id="updateBrandModal" tabindex="-1"
                                            aria-labelledby="updateBrandModalLabel" aria-hidden="true">
                                            <div class="modal-dialog modal-dialog-centered">
                                                <div class="modal-content">

                                                    <div class="modal-header">
                                                        <h5 class="modal-title" id="updateBrandModalLabel">Cập nhật nhãn
                                                            hàng mới</h5>
                                                        <button type="button" class="btn-close" data-bs-dismiss="modal"
                                                            aria-label="Đóng"></button>
                                                    </div>

                                                    <div class="modal-body">
                                                        <form id="updateBrandForm">
                                                            <div class="mb-3">
                                                                <label for="brandName" class="form-label">Tên nhãn
                                                                    hàng</label>
                                                                <input type="text" class="form-control" id="brandName"
                                                                    name="brand_Name" placeholder="Nhập tên nhãn hàng"
                                                                    required>
                                                            </div>
                                                        </form>
                                                    </div>

                                                    <div class="modal-footer">
                                                        <button type="button" class="btn btn-secondary"
                                                            data-bs-dismiss="modal">Hủy</button>
                                                        <button type="submit" form="updateBrandForm"
                                                            class="btn btn-primary">Cập nhật</button>
                                                    </div>

                                                </div>
                                            </div>
                                        </div>


                                        <button class="btn btn-sm btn-danger delete-brand-btn"
                                            data-id="<%= brand.brand_id %>">
                                            <i class="fas fa-trash"></i>
                                        </button>
                                    </td>

                                </tr>
                                <% }) %>
                                    <% } else { %>
                                        <tr>
                                            <td colspan="3" class="text-center">Không có nhãn hàng nào.</td>
                                        </tr>
                                        <% } %>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Shipping Section -->
        <div class="content-section" id="shipping">
            <h3 class="section-title">Quản lý giao hàng</h3>
            <div class="mb-3">
                <button class="btn btn-success"><i class="fas fa-plus"></i> Thêm đơn giao hàng mới</button>
            </div>
            <div class="table-responsive">
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th>Mã giao hàng</th>
                            <th>Ngày giao</th>
                            <th>Phương thức giao</th>
                            <th>Trạng thái</th>
                            <th>Người nhận</th>
                            <th>Mã đơn hàng</th>
                            <th>Địa chỉ</th>
                            <th>Thao tác</th>
                        </tr>
                    </thead>
                    <tbody>
                        <% if (shippings && shippings.length> 0) { %>
                            <% shippings.forEach(function(shipping) { %>
                                <tr>
                                    <td>
                                        <%= shipping.id %>
                                    </td>
                                    <td>
                                        <%= shipping.shipping_date %>
                                    </td>
                                    <td>
                                        <%= shipping.delivery_method %>
                                    </td>
                                    <td>
                                        <%= shipping.shipping_status %>
                                    </td>
                                    <td>
                                        <%= shipping.customer_name || 'N/A' %>
                                    </td> <!-- nếu cần hiển thị tên thay vì id -->
                                    <td>
                                        <%= shipping.id_order %>
                                    </td>
                                    <td>
                                        <%= shipping.shipping_address %>
                                    </td>
                                    <td>
                                        <a href="/shippings/<%= shipping.id_shipping %>" class="btn btn-sm btn-info"><i
                                                class="fas fa-edit"></i></a>
                                        <form action="/shippings/<%= shipping.id_shipping %>/delete" method="POST"
                                            style="display:inline;">
                                            <button class="btn btn-sm btn-danger"
                                                onclick="return confirm('Bạn có chắc muốn xoá?')">
                                                <i class="fas fa-trash"></i>
                                            </button>
                                        </form>
                                    </td>
                                </tr>
                                <% }) %>
                                    <% } else { %>
                                        <tr>
                                            <td colspan="8" class="text-center">Không có dữ liệu vận chuyển.</td>
                                        </tr>
                                        <% } %>
                    </tbody>

                </table>
            </div>
        </div>

        <!-- Supplier Section -->
        <div class="content-section" id="suppliers">
            <h3 class="section-title">Quản lý nhà cung cấp</h3>
            <div class="mb-3">
                <!-- Nút mở popup -->
                <a href="#" class="btn btn-success" data-bs-toggle="modal" data-bs-target="#addSupplierModal">
                    <i class="fas fa-plus"></i> Thêm nhà cung cấp mới
                </a>
                <!-- Modal Form -->
                <div class="modal fade" id="addSupplierModal" tabindex="-1" aria-labelledby="addSupplierModalLabel"
                    aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered">
                        <div class="modal-content">

                            <div class="modal-header">
                                <h5 class="modal-title" id="addSupplierModalLabel">Thêm nhà cung cấp mới</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal"
                                    aria-label="Đóng"></button>
                            </div>

                            <div class="modal-body">
                                <form id="addSupplierForm">
                                    <div class="mb-3">
                                        <label for="supplierName" class="form-label">Tên nhà cung cấp</label>
                                        <input type="text" class="form-control" id="supplierName" name="name"
                                            placeholder="Nhập tên nhà cung cấp" required>
                                    </div>
                                    <div class="mb-3">
                                        <label for="supplierPhonenumber" class="form-label">Số điện thoại</label>
                                        <input type="text" class="form-control" id="supplierPhonenumber" name="phonenumber"
                                            placeholder="Nhập số điện thoại" required>
                                    </div>
                                    <div class="mb-3">
                                        <label for="supplierEmail" class="form-label">Email</label>
                                        <input type="text" class="form-control" id="supplierEmail" name="email"
                                            placeholder="Nhập email" required>
                                    </div>
                                    <div class="mb-3">
                                        <label for="supplierAddress" class="form-label">Địa chỉ</label>
                                        <input type="text" class="form-control" id="supplierAddress" name="address"
                                            placeholder="Nhập địa chỉ" required>
                                    </div>
                                </form>
                            </div>

                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Hủy</button>
                                <button type="submit" form="addSupplierForm" class="btn btn-primary">Thêm</button>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
            <div class="table-responsive">
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th>Mã nhà cung cấp</th>
                            <th>Tên nhà cung cấp</th>
                            <th>Điện thoại</th>
                            <th>Email</th>
                            <th>Địa chỉ</th>
                            <th>Thao tác</th>
                        </tr>
                    </thead>
                    <tbody>
                        <% suppliers.forEach((supplier)=> { %>
                            <tr>
                                <td>
                                    <%= supplier.id %>
                                </td>
                                <td>
                                    <%= supplier.name %>
                                </td>
                                <td>
                                    <%= supplier.phonenumber %>
                                </td>
                                <td>
                                    <%= supplier.email %>
                                </td>
                                <td>
                                    <%= supplier.address %>
                                </td>
                                <td>
                                    <a href="/suppliers/<%= supplier.id %>/edit" class="btn btn-sm btn-info">
                                        <i class="fas fa-edit"></i>
                                    </a>
                                    <form action="/suppliers/<%= supplier.id %>/delete" method="POST"
                                        style="display:inline;">
                                        <button type="submit" class="btn btn-sm btn-danger"
                                            onclick="return confirm('Bạn có chắc muốn xóa nhà cung cấp này?')">
                                            <i class="fas fa-trash"></i>
                                        </button>
                                    </form>
                                </td>
                            </tr>
                            <% }); %>
                    </tbody>

                </table>
            </div>
        </div>

        <!-- Voucher Section -->
        <div class="content-section" id="vouchers">
            <h3 class="section-title">Quản lý voucher</h3>
            <div class="mb-3">
                <!-- Nút mở popup -->
                <a href="#" class="btn btn-success" data-bs-toggle="modal" data-bs-target="#addVoucherModal">
                    <i class="fas fa-plus"></i> Thêm voucher mới
                </a>

                <!-- Modal Form -->
                <div class="modal fade" id="addVoucherModal" tabindex="-1" aria-labelledby="addVoucherModalLabel"
                    aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered">
                        <div class="modal-content">

                            <div class="modal-header">
                                <h5 class="modal-title" id="addVoucherModalLabel">Thêm Voucher</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal"
                                    aria-label="Đóng"></button>
                            </div>

                            <div class="modal-body">
                                <form id="addVoucherForm">
                                    <div class="mb-3">
                                        <label for="vouCode" class="form-label">Mã voucher</label>
                                        <input type="text" class="form-control" id="vouCode" name="vou_code"
                                            placeholder="Nhập mã voucher" required>
                                    </div>
                                    <div class="mb-3">
                                        <label for="vouValue" class="form-label">Giá trị (%)</label>
                                        <input type="number" class="form-control" id="vouValue" name="value"
                                            placeholder="Nhập giá trị voucher" min="1" max="100" required>
                                    </div>
                                    <div class="mb-3">
                                        <label for="startDate" class="form-label">Ngày bắt đầu</label>
                                        <div class="input-group">
                                            <input type="text" class="form-control" id="startDate" name="stardate"
                                                placeholder="YYYY-MM-DD HH:mm:ss" required>
                                            <span class="input-group-text" id="startDateIcon" style="cursor:pointer;">
                                                <i class="fas fa-calendar-alt"></i>
                                            </span>
                                        </div>
                                    </div>

                                    <div class="mb-3">
                                        <label for="endDate" class="form-label">Ngày kết thúc</label>
                                        <div class="input-group">
                                            <input type="text" class="form-control" id="endDate" name="enddate"
                                                placeholder="YYYY-MM-DD HH:mm:ss" required>
                                            <span class="input-group-text" id="endDateIcon" style="cursor:pointer;">
                                                <i class="fas fa-calendar-alt"></i>
                                            </span>
                                        </div>
                                    </div>
                                </form>
                                <div id="voucherMessage" class="mt-2 text-danger" style="display:none;"></div>
                            </div>

                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Hủy</button>
                                <button type="submit" form="addVoucherForm" class="btn btn-primary">Thêm</button>
                            </div>

                        </div>
                    </div>
                </div>

                <div class="table-responsive">
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Mã voucher</th>
                                <th>Trị giá</th>
                                <th>Ngày bắt đầu</th>
                                <th>ngày kết thúc</th>
                                <th>Thao tác</th>
                            </tr>
                        </thead>
                        <tbody>
                            <% if (vouchers && vouchers.length> 0) { %>
                                <% vouchers.forEach((voucher, index)=> { %>
                                    <tr>
                                        <td>
                                            <%= voucher.id %>
                                        </td>
                                        <td>
                                            <%= voucher.voucher_code %>
                                        </td>
                                        <td>
                                            <%= voucher.voucher_value %>
                                        </td>
                                        <td>
                                            <%= voucher.date_start %>
                                        </td>
                                        <td>
                                            <%= voucher.date_end %>
                                        </td>
                                        <td>
                                            <form action="/vouchers/<%= voucher.id %>/update" method="get"
                                                style="display:inline;">
                                                <button class="btn btn-sm btn-info" title="Chỉnh sửa"><i
                                                        class="fas fa-edit"></i></button>
                                            </form>
                                        <td>
                                            <button class="btn btn-sm btn-danger delete-voucher-btn" title="Xóa"
                                                data-id="<%= voucher.id %>">
                                                <i class="fas fa-trash"></i>
                                            </button>
                                        </td>

                                        </td>

                                    </tr>
                                    <% }) %>
                                        <% } else { %>
                                            <tr>
                                                <td colspan="6" class="text-center">Không có voucher nào.</td>
                                            </tr>
                                            <% } %>
                        </tbody>

                    </table>
                </div>
            </div>

            <!-- Accounts Section -->
            <div class="content-section" id="accounts">
                <h3 class="section-title">Quản lý tài khoản</h3>
                <div class="mb-3">
                    <button class="btn btn-success"><i class="fas fa-plus"></i> Thêm tài khoản mới</button>
                </div>
                <div class="table-responsive">
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Email</th>
                                <th>Mật khẩu</th>
                                <th>Quyền</th>
                                <th>Thao tác</th>
                            </tr>
                        </thead>
                        <tbody>
                            <% accounts.forEach((account, index)=> { %>
                                <tr>
                                    <td>
                                        <%= account.id %>
                                    </td>
                                    <td>
                                        <%= account.email %>
                                    </td>
                                    <td>
                                        <div class="input-group">
                                            <input type="password" class="form-control form-control-sm"
                                                value="<%= account.password %>" id="password<%= index %>" readonly>
                                            <button class="btn btn-sm btn-outline-secondary toggle-password"
                                                type="button" data-target="password<%= index %>">
                                                <i class="fas fa-eye"></i>
                                            </button>
                                        </div>
                                    </td>
                                    <td>
                                        <%= account.role %>
                                    </td>
                                    <td>
                                        <a href="/accounts/<%= account.id %>" class="btn btn-sm btn-primary"
                                            title="Xem chi tiết">
                                            <i class="fas fa-eye"></i>
                                        </a>
                                        <a href="/accounts/<%= account.id %>/edit" class="btn btn-sm btn-info"
                                            title="Chỉnh sửa">
                                            <i class="fas fa-edit"></i>
                                        </a>
                                        <form action="/accounts/<%= account.id %>/delete" method="POST"
                                            class="d-inline">
                                            <button type="submit" class="btn btn-sm btn-danger"
                                                onclick="return confirm('Bạn có chắc muốn xoá tài khoản này?')"
                                                title="Xoá">
                                                <i class="fas fa-trash"></i>
                                            </button>
                                        </form>
                                    </td>
                                </tr>
                                <% }); %>
                        </tbody>

                    </table>
                </div>
            </div>
        </div>

        <!-- Bootstrap JS và jQuery -->
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
        <!-- Flatpickr JS -->
        <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
        <!-- JavaScript -->
        <script src="js/dashboardScript.js"></script>
</body>

</html>